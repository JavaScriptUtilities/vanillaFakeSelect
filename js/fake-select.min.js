var vanillaFakeSelect=function(a,b){"use strict";var c=this,d={autocompleteInsideTerm:!1,displaySearch:!0,searchResetSearchOnClose:!1,noResultsText:"No results found",searchText:"Search a value",coverText:"Select a value",coverClass:"",enableScrollIntoView:!1,fakeOptionTemplate:function(a){return a.innerHTML}},e=a,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,m=[],n=!1,o=!1,p=!1,q=!1,r="",s="",t=!1,u=!1,v=function(a){u=c.getSettings(a,d),w(),F()},w=function(){e.setAttribute("tabindex","-1"),x(),y(),A(),e.parentNode.insertBefore(f,e.nextSibling),f.appendChild(e)},x=function(){f=c.cEl("div",[["role","combobox"],["class","fakeselect-wrapper "+u.coverClass]]),S(!1)},y=function(){k||(k=c.cEl("a",[["href","#"],["role","button"],["class","fakeselect-cover"]]),f.appendChild(k)),z(),Q(!0)},z=function(){k.disabled=e.disabled},A=function(){var a,b;if(l||(l=c.cEl("ul",[["class","fakeselect-list"],["role","listbox"]])),m.length)for(a=0,b=m.length;a<b;a++)B(a);for(u.displaySearch&&C(),a=0,b=e.options.length;a<b;a++)D(a);f.appendChild(l)},B=function(a){m[a].removeEventListener("click",O),l.removeChild(m[a])},C=function(){g=c.cEl("li",[["class","fakeselect-search"]]),h=c.cEl("input",[["type","text"],["name","fakeselect-search"],["placeholder",u.searchText]]),j=c.cEl("button",[["type","button"]]),i=c.cEl("li",[["class","fakeselect-noresults"]]),i.innerHTML=u.noResultsText,g.appendChild(h),g.appendChild(j),l.appendChild(g),l.appendChild(i)},D=function(a){m[a]=c.cEl("li",[["data-i",a],["role","option"]]),p=e.options[a].parentNode,"OPTGROUP"==p.tagName&&(m[a].setAttribute("data-optgroup",1),E(p)),e.options[a].disabled&&m[a].setAttribute("data-disabled",1),m[a].innerHTML=u.fakeOptionTemplate(e.options[a]),l.appendChild(m[a])},E=function(a){if(a!=q){q=a;var b=c.cEl("li",[["class","optgroup-label"]]);b.innerHTML=a.getAttribute("label")||"&nbsp;",l.appendChild(b)}},F=function(a){a=a||!1,P(e.selectedIndex?e.selectedIndex:0,!1);for(var b=0,c=m.length;b<c;b++)1!=m[b].getAttribute("data-disabled")&&m[b].addEventListener("click",O,1);return!a&&(k.addEventListener("click",function(a){a.preventDefault(),S()},1),u.displaySearch&&(h.addEventListener("keyup",J,1),j.addEventListener("click",J,1)),e.addEventListener("focus",R,1),e.addEventListener("change",Q,1),e.addEventListener("initcover",Q,1),window.addEventListener("click",N,1),void window.addEventListener("keydown",G,1))},G=function(a){27==a.keyCode&&(L(),S(!1)),n&&(9==a.keyCode&&S(!1),38==a.keyCode&&(a.preventDefault(),T("less")),40==a.keyCode&&(a.preventDefault(),T("plus")),13==a.keyCode&&(a.preventDefault(),P(c.tmpValue,!0),S(!1))),!n&&M()&&(38!=a.keyCode&&40!=a.keyCode||(a.preventDefault(),S(!0))),M()&&(r=X(String.fromCharCode(event.keyCode)),/[a-z0-9-_ ]/.test(r)&&(clearTimeout(t),s+=r,H(s),t=setTimeout(L,1e3)))},H=function(a){a=a||"";var b,c,d=a.length,f=e.options.length;for(b=0;b<f;b++)if(c=X(e.options[b].innerHTML),!e.options[b].disabled){if(c.substring(0,d)==a){P(b);break}if(u.autocompleteInsideTerm&&c.search(a)>-1){P(b);break}}},I=function(){K(i,0);for(var a=0,b=m.length;a<b;a++)K(m[a],1)},J=function(a){var b=X(h.value);if(a.keyCode&&40==a.keyCode)return a.preventDefault(),a.stopPropagation(),h.blur(),void T("more");I();for(var c=0,d=m.length;c<d;c++)K(m[c],0),X(m[c].innerText).search(b)>-1&&K(m[c],1);T(V())},K=function(a,b){a.setAttribute("data-visible",b)},L=function(){clearTimeout(t),r="",s=""},M=function(){return document.activeElement==k},N=function(a){f.contains(a.target)||S(!1)},O=function(){P(parseInt(this.getAttribute("data-i"),10))},P=function(a,b){b="boolean"!=typeof b||b,e.selectedIndex=a,S(!1),b&&c.triggerEvent(e,"change"),T(a)},Q=function(a){var b,c=u.coverText;if(!k)return!1;if("boolean"!=typeof a&&(a=!1),a)for(var d=0,f=e.options.length;d<f;d++)b=e.options[d].getAttribute("selected"),"string"==typeof b&&(c=e.options[d].innerHTML);else"number"==typeof e.selectedIndex&&(c=e.options[e.selectedIndex].innerHTML);k.innerHTML=c},R=function(){k.focus()},S=function(a){"boolean"!=typeof a&&(a=!n),n=a,f.setAttribute("aria-expanded",n),c.triggerEvent(e,"vff-setvisibility",{isExpanded:isExpanded}),!n&&h&&c.searchResetSearchOnClose&&setTimeout(function(){h.value="",I()},100),n&&h&&setTimeout(function(){h.focus()},100),c.tmpValue=e.selectedIndex,a===!0&&(o=!0),a===!1&&o&&Q()},T=function(a){var b=m.length,d=W(),e=a;if("plus"==a&&(a=c.tmpValue+1),"less"==a&&(a=c.tmpValue-1),"number"!=typeof a&&(a=c.tmpValue),a=Math.max(0,a),a=Math.min(b-1,a),c.tmpValue=a,!U(a))return(0===e||"plus"==e&&a<b)&&(d!==!1?T(e==d?d:"plus"):K(i,1)),"less"==e&&T(a>0?"less":V()),!1;for(var f=0;f<b;f++)m[f].setAttribute("data-current",0);m[a].setAttribute("data-current",1),u.enableScrollIntoView&&m[a].scrollIntoView&&m[a].scrollIntoView()},U=function(a){var b=m[a].getAttribute("data-visible");return 0!==b&&"0"!=b&&(1!=m[a].getAttribute("data-disabled")&&!m[a].disabled)},V=function(a){for(var b=e.options.length,c=0;c<b;c++)if(U(c))return c;return 0},W=function(a){for(var b=!1,c=e.options.length,d=0;d<c;d++)U(d)&&(b=d);return b},X=function(a){return c.removeAccents(a).toLowerCase()};return c.refresh=function(){return A(),F(!0),c},c.destroyCalls=function(){var a=f.parentNode;return e.removeAttribute("tabindex"),a.insertBefore(e,f.nextSibling),e.removeEventListener("focus",R),e.removeEventListener("change",Q),e.removeEventListener("initcover",Q),window.removeEventListener("click",N),window.removeEventListener("keydown",G),a.removeChild(f),c},v(b),c};vanillaFakeSelect.prototype.removeAccents=function(a){"use strict";for(var b,c="ÀÁÂÃÄÅàáâãäåÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž",d="AAAAAAaaaaaaOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz",e=a.split(""),f=0,g=e.length;f<g;f++)b=c.indexOf(e[f]),b>=0&&(a=a.replace(c[b],d[b]));return a},vanillaFakeSelect.prototype.getSettings=function(a,b){"use strict";var c;"object"!=typeof a&&(a={}),function(){if("loadElement"in a){var b=a.loadElement.getAttribute("data-settings");b&&(c=JSON.parse(b),"object"==typeof c&&(c.el=a.loadElement,a=c))}}();var d={};for(var e in b)d[e]=b[e];for(var f in a)d[f]=a[f];return d},vanillaFakeSelect.prototype.triggerEvent=function(a,b,c){var d=!1;return c=c||{},document.createEventObject?(d=document.createEventObject(),d.button=1,d.triggerParams=c,a.fireEvent("on"+b,d)):(d=document.createEvent("HTMLEvents"),d.initEvent(b,!0,!1),d.triggerParams=c,a.dispatchEvent(d))},vanillaFakeSelect.prototype.cEl=function(a,b){for(var c=document.createElement(a),d=0,e=b.length;d<e;d++)c.setAttribute(b[d][0],b[d][1]);return c};