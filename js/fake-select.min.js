var vanillaFakeSelect=function(a,b){"use strict";var c=this,d={autocompleteInsideTerm:!1,displaySearch:!0,searchResetSearchOnClose:!1,searchText:"Search a value",coverText:"Select a value",coverClass:"",enableScrollIntoView:!1,fakeOptionTemplate:function(a){return a.innerHTML}},e=a,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=[],m=!1,n=!1,o=!1,p=!1,q="",r="",s=!1,t=!1,u=function(a){t=c.getSettings(a,d),v(),E()},v=function(){e.setAttribute("tabindex","-1"),w(),x(),z(),e.parentNode.insertBefore(f,e.nextSibling),f.appendChild(e)},w=function(){f=c.cEl("div",[["role","combobox"],["class","fakeselect-wrapper "+t.coverClass]]),R(!1)},x=function(){j||(j=c.cEl("a",[["href","#"],["role","button"],["class","fakeselect-cover"]]),f.appendChild(j)),y(),P(!0)},y=function(){j.disabled=e.disabled},z=function(){var a,b;if(k||(k=c.cEl("ul",[["class","fakeselect-list"],["role","listbox"]])),l.length)for(a=0,b=l.length;a<b;a++)A(a);for(t.displaySearch&&B(),a=0,b=e.options.length;a<b;a++)C(a);f.appendChild(k)},A=function(a){l[a].removeEventListener("click",N),k.removeChild(l[a])},B=function(){g=c.cEl("li",[["class","fakeselect-search"]]),h=c.cEl("input",[["type","text"],["name","fakeselect-search"],["placeholder",t.searchText]]),i=c.cEl("button",[["type","button"]]),g.appendChild(h),g.appendChild(i),k.appendChild(g)},C=function(a){l[a]=c.cEl("li",[["data-i",a],["role","option"]]),o=e.options[a].parentNode,"OPTGROUP"==o.tagName&&(l[a].setAttribute("data-optgroup",1),D(o)),e.options[a].disabled&&l[a].setAttribute("data-disabled",1),l[a].innerHTML=t.fakeOptionTemplate(e.options[a]),k.appendChild(l[a])},D=function(a){if(a!=p){p=a;var b=c.cEl("li",[["class","optgroup-label"]]);b.innerHTML=a.getAttribute("label")||"&nbsp;",k.appendChild(b)}},E=function(a){a=a||!1,O(e.selectedIndex?e.selectedIndex:0,!1);for(var b=0,c=l.length;b<c;b++)1!=l[b].getAttribute("data-disabled")&&l[b].addEventListener("click",N,1);return!a&&(j.addEventListener("click",function(a){a.preventDefault(),R()},1),t.displaySearch&&(h.addEventListener("keyup",I,1),i.addEventListener("click",I,1)),e.addEventListener("focus",Q,1),e.addEventListener("change",P,1),e.addEventListener("initcover",P,1),window.addEventListener("click",M,1),void window.addEventListener("keydown",F,1))},F=function(a){27==a.keyCode&&(K(),R(!1)),m&&(9==a.keyCode&&R(!1),38==a.keyCode&&(a.preventDefault(),S("less")),40==a.keyCode&&(a.preventDefault(),S("plus")),13==a.keyCode&&(a.preventDefault(),O(c.tmpValue,!0),R(!1))),!m&&L()&&(38!=a.keyCode&&40!=a.keyCode||(a.preventDefault(),R(!0))),L()&&(q=String.fromCharCode(event.keyCode).toLowerCase(),/[a-z0-9-_ ]/.test(q)&&(clearTimeout(s),r+=q,G(r),s=setTimeout(K,1e3)))},G=function(a){a=a||"";var b,d,f=a.length,g=e.options.length;for(b=0;b<g;b++)if(d=c.removeAccents(e.options[b].innerHTML).toLowerCase(),!e.options[b].disabled){if(d.substring(0,f)==a){O(b);break}if(t.autocompleteInsideTerm&&d.search(a)>-1){O(b);break}}},H=function(){for(var a=0,b=l.length;a<b;a++)J(l[a],1)},I=function(a){if(a.keyCode&&40==a.keyCode)return a.preventDefault(),a.stopPropagation(),h.blur(),void S("more");H();for(var b=0,c=l.length;b<c;b++)J(l[b],0),l[b].innerText.toLowerCase().search(h.value)>-1&&J(l[b],1);S(U())},J=function(a,b){a.setAttribute("data-visible",b)},K=function(){clearTimeout(s),q="",r=""},L=function(){return document.activeElement==j},M=function(a){f.contains(a.target)||R(!1)},N=function(){O(parseInt(this.getAttribute("data-i"),10))},O=function(a,b){b="boolean"!=typeof b||b,e.selectedIndex=a,R(!1),b&&c.triggerEvent(e,"change"),S(a)},P=function(a){var b,c=t.coverText;if(!j)return!1;if("boolean"!=typeof a&&(a=!1),a)for(var d=0,f=e.options.length;d<f;d++)b=e.options[d].getAttribute("selected"),"string"==typeof b&&(c=e.options[d].innerHTML);else"number"==typeof e.selectedIndex&&(c=e.options[e.selectedIndex].innerHTML);j.innerHTML=c},Q=function(){j.focus()},R=function(a){"boolean"!=typeof a&&(a=!m),m=a,f.setAttribute("aria-expanded",m),!m&&h&&c.searchResetSearchOnClose&&setTimeout(function(){h.value="",H()},50),c.tmpValue=e.selectedIndex,a===!0&&(n=!0),a===!1&&n&&P()},S=function(a){var b=l.length,d=V(),e=a;if("plus"==a&&(a=c.tmpValue+1),"less"==a&&(a=c.tmpValue-1),"number"!=typeof a&&(a=c.tmpValue),a=Math.max(0,a),a=Math.min(b-1,a),c.tmpValue=a,!T(a))return(0===e||"plus"==e&&a<b)&&S(e==d?d:"plus"),"less"==e&&S(a>0?"less":U()),!1;for(var f=0;f<b;f++)l[f].setAttribute("data-current",0);l[a].setAttribute("data-current",1),t.enableScrollIntoView&&l[a].scrollIntoView&&l[a].scrollIntoView()},T=function(a){var b=l[a].getAttribute("data-visible");return 0!==b&&"0"!=b&&(1!=l[a].getAttribute("data-disabled")&&!l[a].disabled)},U=function(a){for(var b=e.options.length,c=0;c<b;c++)if(T(c))return c;return 0},V=function(a){for(var b=0,c=e.options.length,d=0;d<c;d++)T(d)&&(b=d);return b};return c.refresh=function(){return z(),E(!0),c},c.destroyCalls=function(){var a=f.parentNode;return e.removeAttribute("tabindex"),a.insertBefore(e,f.nextSibling),e.removeEventListener("focus",Q),e.removeEventListener("change",P),e.removeEventListener("initcover",P),window.removeEventListener("click",M),window.removeEventListener("keydown",F),a.removeChild(f),c},u(b),c};vanillaFakeSelect.prototype.removeAccents=function(a){"use strict";for(var b,c="ÀÁÂÃÄÅàáâãäåÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž",d="AAAAAAaaaaaaOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz",e=a.split(""),f=0,g=e.length;f<g;f++)b=c.indexOf(e[f]),b>=0&&(a=a.replace(c[b],d[b]));return a},vanillaFakeSelect.prototype.getSettings=function(a,b){"use strict";var c;"object"!=typeof a&&(a={}),function(){if("loadElement"in a){var b=a.loadElement.getAttribute("data-settings");b&&(c=JSON.parse(b),"object"==typeof c&&(c.el=a.loadElement,a=c))}}();var d={};for(var e in b)d[e]=b[e];for(var f in a)d[f]=a[f];return d},vanillaFakeSelect.prototype.triggerEvent=function(a,b,c){var d=!1;return c=c||{},document.createEventObject?(d=document.createEventObject(),d.button=1,d.triggerParams=c,a.fireEvent("on"+b,d)):(d=document.createEvent("HTMLEvents"),d.initEvent(b,!0,!1),d.triggerParams=c,a.dispatchEvent(d))},vanillaFakeSelect.prototype.cEl=function(a,b){for(var c=document.createElement(a),d=0,e=b.length;d<e;d++)c.setAttribute(b[d][0],b[d][1]);return c};